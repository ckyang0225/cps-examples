cmake_minimum_required(VERSION 4.0)
project(zdemo)

include(ExternalProject)

ExternalProject_Add(zwrap
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/zwrap"
  BINARY_DIR "${CMAKE_CURRENT_BINARY_DIR}/zwrap"
  INSTALL_DIR "${CMAKE_CURRENT_BINARY_DIR}/install"
  CMAKE_CACHE_ARGS
    -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
  USES_TERMINAL_BUILD ON)

ExternalProject_Add(ztest
  DEPENDS zwrap
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/ztest"
  BINARY_DIR "${CMAKE_CURRENT_BINARY_DIR}/ztest"
  INSTALL_DIR "${CMAKE_CURRENT_BINARY_DIR}/install"
  CMAKE_CACHE_ARGS
    -DCMAKE_PREFIX_PATH:PATH=<INSTALL_DIR>
    -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
  USES_TERMINAL_BUILD ON)
